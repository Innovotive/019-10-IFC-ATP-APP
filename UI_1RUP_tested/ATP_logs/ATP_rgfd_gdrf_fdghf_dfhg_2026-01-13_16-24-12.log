[16:24:12] [INIT] ID pins configured (ACTIVE-HIGH, ID3 OFF)
[16:24:12] === ATP START — IDs: {1: 'rgfd', 2: 'gdrf', 3: 'fdghf', 4: 'dfhg'} ===
[16:24:12] [FILE] Log created: ATP_logs/ATP_rgfd_gdrf_fdghf_dfhg_2026-01-13_16-24-12.log
[16:24:12] [UI] Setup COMPLETE — Quick Test enabled
[16:24:13] [UI] Quick Test START
[16:24:13] [HW] relay_on()
[16:24:14] [GATE 1] REAL (RUP1)
[16:24:15] [GATE 2] REAL (RUP1)
[16:24:18] [UI] Quick Test COMPLETE
[16:24:26] [UI] Full ATP START
[16:24:27] [GATE 3] SIMULATED (depends on Gate 2)
[16:24:28] ============================================================
[16:24:28] [GATE4] Termination test (peak-based via can_commands)
[16:24:28] [GATE4] settle=2.5s window=3.0s fs=500Hz thresh=2.8V topN=20
[16:24:28] [GATE4] PASS needs OFF>ON: dvmax≥0.12V and dtopMean≥0.08V
[16:24:28] [GATE4] SPI + GPIO initialized
[16:24:28] [GATE4] → Sending TERMINATION_ON
[16:24:28] [GATE4] Waiting 2.5s before measuring ON...
[16:24:31] [GATE4] Measuring ON window...
[16:24:34] [GATE4] ON : vmax=3.519V, top20_mean=3.5161290322580645, above=532 (35.5%)
[16:24:34] [GATE4] → Sending TERMINATION_OFF
[16:24:34] [GATE4] Waiting 2.5s before measuring OFF...
[16:24:36] [GATE4] Measuring OFF window...
[16:24:39] [GATE4] OFF: vmax=3.788V, top20_mean=3.7788367546432067, above=530 (35.3%)
[16:24:39] [GATE4] Δ metrics: dvmax=0.269V, dtopMean=0.263V
[16:24:39] [GATE4] PASS — termination change detected
[16:24:39] [GATE4] SPI + GPIO released
[16:24:39] ==================================================
[16:24:39] [GATE5] Starting IUL (Indicator Light) test
[16:24:39] [GATE5] Expectations:
[16:24:39]         IUL_ON  → GPIO LOW  (LED ON)
[16:24:39]         IUL_OFF → GPIO HIGH (LED OFF)
[16:24:39] [GATE5] GPIO25 configured as INPUT
[16:24:39] [GATE5] → Sending IUL_ON (0xE1)
[16:24:39] [GATE5] Waiting 4s for LED to settle
[16:24:43] [GATE5] GPIO read 1: 0
[16:24:47] [GATE5] GPIO read 2: 0
[16:24:51] [GATE5] GPIO read 3: 0
[16:24:55] [GATE5] GPIO read 4: 0
[16:24:59] [GATE5] IUL_ON PASS (GPIO LOW)
[16:24:59] [GATE5] → Sending IUL_OFF (0xE0)
[16:24:59] [GATE5] Waiting 4s for LED to settle
[16:25:03] [GATE5] GPIO read 1: 1
[16:25:07] [GATE5] GPIO read 2: 1
[16:25:11] [GATE5] GPIO read 3: 1
[16:25:15] [GATE5] GPIO read 4: 1
[16:25:19] [GATE5] IUL_OFF PASS (GPIO HIGH)
[16:25:19] [GATE5] PASS — IUL functional test OK
[16:25:19] [GATE5] Cleaning up GPIO
[16:25:19] ==================================================
