[15:38:53] [INIT] ID pins configured (ACTIVE-HIGH, ID3 OFF)
[15:38:53] === ATP START — IDs: {1: 'gfn', 2: 'nhg', 3: 'nh', 4: 'hg'} ===
[15:38:53] [FILE] Log created: ATP_logs/ATP_gfn_nhg_nh_hg_2026-01-13_15-38-53.log
[15:38:53] [UI] Setup COMPLETE — Quick Test enabled
[15:38:55] [UI] Quick Test START
[15:38:55] [HW] relay_on()
[15:38:56] [GATE 1] REAL (RUP1)
[15:38:57] [GATE 2] REAL (RUP1)
[15:39:00] [UI] Quick Test COMPLETE
[15:39:00] [UI] Full ATP START
[15:39:01] [GATE 3] SIMULATED (depends on Gate 2)
[15:39:02] ============================================================
[15:39:02] [GATE4] Termination test (peak-based via can_commands)
[15:39:02] [GATE4] settle=2.5s window=3.0s fs=500Hz thresh=2.8V topN=20
[15:39:02] [GATE4] PASS needs OFF>ON: dvmax≥0.12V and dtopMean≥0.08V
[15:39:02] [GATE4] SPI + GPIO initialized
[15:39:02] [GATE4] → Sending TERMINATION_ON
[15:39:02] [GATE4] Waiting 2.5s before measuring ON...
[15:39:05] [GATE4] Measuring ON window...
[15:39:08] [GATE4] ON : vmax=3.675V, top20_mean=3.673509286412512, above=539 (35.9%)
[15:39:08] [GATE4] → Sending TERMINATION_OFF
[15:39:08] [GATE4] Waiting 2.5s before measuring OFF...
[15:39:10] [GATE4] Measuring OFF window...
[15:39:13] [GATE4] OFF: vmax=3.910V, top20_mean=3.901759530791789, above=522 (34.8%)
[15:39:13] [GATE4] Δ metrics: dvmax=0.235V, dtopMean=0.228V
[15:39:13] [GATE4] PASS — termination change detected
[15:39:13] [GATE4] SPI + GPIO released
[15:39:13] ==================================================
[15:39:13] [GATE5] Starting IUL (Indicator Light) test
[15:39:13] [GATE5] Expectations:
[15:39:13]         IUL_ON  → GPIO LOW  (LED ON)
[15:39:13]         IUL_OFF → GPIO HIGH (LED OFF)
[15:39:13] [GATE5] GPIO25 configured as INPUT
[15:39:13] [GATE5] → Sending IUL_ON (0xE1)
[15:39:13] [GATE5] Waiting 3s for LED to settle
[15:39:16] [GATE5] GPIO read 1: 1
[15:39:19] [GATE5] GPIO read 2: 1
[15:39:22] [GATE5] GPIO read 3: 0
[15:39:25] [GATE5] GPIO read 4: 0
[15:39:28] [GATE5] GPIO read 5: 0
[15:39:31] [GATE5] GPIO read 6: 0
[15:39:34] [GATE5] IUL_ON PASS (GPIO LOW)
[15:39:34] [GATE5] → Sending IUL_OFF (0xE0)
[15:39:34] [GATE5] Waiting 3s for LED to settle
[15:39:37] [GATE5] GPIO read 1: 1
[15:39:40] [GATE5] GPIO read 2: 1
[15:39:43] [GATE5] GPIO read 3: 1
[15:39:46] [GATE5] GPIO read 4: 1
[15:39:49] [GATE5] GPIO read 5: 1
[15:39:52] [GATE5] GPIO read 6: 1
[15:39:55] [GATE5] IUL_OFF PASS (GPIO HIGH)
[15:39:55] [GATE5] PASS — IUL functional test OK
[15:39:55] [GATE5] Cleaning up GPIO
[15:39:55] ==================================================
